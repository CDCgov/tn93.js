!function(){"use strict";function e(e,o,i){i||(i="AVERAGE");const r=Math.min(e.length,o.length);let n=0,s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];const c={};if("SKIP"==i)for(let l=0;l<r;l++){let f=t[e.charCodeAt(l)],i=t[o.charCodeAt(l)];f<4&&i<4&&(s[f][i]+=1),c[l]=JSON.parse(JSON.stringify(s))}else if("GAPMM"==i)for(let i=0;i<r;i++){let r=t[e.charCodeAt(i)],n=t[o.charCodeAt(i)];if(r<4&&n<4)s[r][n]+=1;else{if(17==r||17==n){if(17==r&&17==n)continue;17==r?r=15:n=15}if(r<4){if(f[n]>0)for(let e=0;e<4;e++)l[n][e]&&(s[r][e]+=f[n])}else if(n<4){if(f[r]>0)for(let e=0;e<4;e++)l[r][e]&&(s[e][n]+=f[r])}else{let e=f[r]*f[n];if(e>0)for(let t=0;t<4;t++)if(l[r][t])for(let f=0;f<4;f++)l[n][f]&&(s[t][f]+=e)}}}else if("RESOLVE"==i)for(let i=0;i<r;i++){let r=t[e.charCodeAt(i)],n=t[o.charCodeAt(i)];if(r<4&&n<4)s[r][n]+=1;else{if(17==r||17==n)continue;if(r<4){if(f[n]>0){if(l[n][r]){s[r][r]+=1;continue}for(let e=0;e<4;e++)l[n][e]&&(s[r][e]+=f[n])}}else if(n<4){if(f[r]>0){if(l[r][n]){s[n][n]+=1;continue}for(let e=0;e<4;e++)l[r][e]&&(s[e][n]+=f[r])}}else{let e=f[r]*f[n];if(e>0){let t=0,f=[!1,!1,!1,!1];for(let e=0;e<4;e++)l[r][e]&&l[n][e]&&(t++,f[e]=!0);if(t>0){let e=1/t;for(let t=0;t<4;t++)f[t]&&(s[t][t]+=e);continue}for(let t=0;t<4;t++)if(l[r][t])for(let f=0;f<4;f++)l[n][f]&&(s[t][f]+=e)}}}}else for(let i=0;i<r;i++){let r=t[e.charCodeAt(i)],n=t[o.charCodeAt(i)];if(r<4&&n<4)s[r][n]+=1;else{if(17==r||17==n)continue;if(r<4){if(f[n]>0)for(let e=0;e<4;e++)l[n][e]&&(s[r][e]+=f[n])}else if(n<4){if(f[r]>0)for(let e=0;e<4;e++)l[r][e]&&(s[e][n]+=f[r])}else{let e=f[r]*f[n];if(e>0)for(let t=0;t<4;t++)if(l[r][t])for(let f=0;f<4;f++)l[n][f]&&(s[t][f]+=e)}}}let u=[0,0,0,0];for(let e=0;e<4;e++)for(let t=0;t<4;t++)u[e]+=s[e][t],u[t]+=s[e][t];let h=2/(u[0]+u[1]+u[2]+u[3]),a=(s[0][2]+s[2][0])*h,A=(s[1][3]+s[3][1])*h,d=1-((s[0][0]+s[1][1]+s[2][2]+s[3][3])*h+a+A);if(0==u[0]||0==u[1]||0==u[2]||0==u[3])a=1-2*(a+A)-d,A=1-2*d,n=a>0&&A>0?-.5*Math.log(a)-.25*Math.log(A):1;else{const e=1/(u[0]+u[1]+u[2]+u[3]);let t=[0,0,0,0];for(let l=0;l<4;l++)t[l]=u[l]*e;const l=t[0]+t[2],f=t[1]+t[3],o=2*t[0]*t[2]/l,i=2*t[1]*t[3]/f,r=2*(l*f-t[0]*t[2]*f/l-t[1]*t[3]*l/f);a=1-a/o-.5*d/l,A=1-A/i-.5*d/f,d=1-.5*d/f/l,n=-o*Math.log(a)-i*Math.log(A)-r*Math.log(d)}return n}const t=Array(256).fill(16);t[45]=17,t[65]=0,t[66]=11,t[67]=1,t[68]=12,t[71]=2,t[72]=13,t[75]=9,t[77]=10,t[78]=15,t[82]=5,t[83]=7,t[84]=3,t[85]=4,t[86]=14,t[87]=8,t[89]=6,t[97]=0,t[98]=11,t[99]=1,t[100]=12,t[103]=2,t[104]=13,t[107]=9,t[109]=10,t[110]=15,t[114]=5,t[115]=7,t[116]=3,t[117]=4,t[118]=14,t[119]=8,t[121]=6,e.mapChar=t;const l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1],[0,0,0,1],[1,0,1,0],[0,1,0,1],[0,1,1,0],[1,0,0,1],[0,0,1,1],[1,1,0,0],[0,1,1,1],[1,0,1,1],[1,1,0,1],[1,1,1,0],[1,1,1,1],[1,1,1,1],[0,0,0,0]];e.resolutions=l;const f=[1,1,1,1,1,.5,.5,.5,.5,.5,.5,.5,1/3,1/3,1/3,1/3,1/4,1/4,0];e.resolutionsCount=f,e.toInts=function(e){const l=e.length;let f=new Uint8Array(l);for(let o=0;o<l;o++)f[o]=t[e.charCodeAt(o)];return f},e.onInts=function(e,t,o){o||(o="AVERAGE");const i=Math.min(e.length,t.length);let r=0,n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];if("SKIP"==o)for(let l=0;l<i;l++){let f=e[l],o=t[l];f<4&&o<4&&(n[f][o]+=1)}else if("GAPMM"==o)for(let o=0;o<i;o++){let i=e[o],r=t[o];if(i<4&&r<4)n[i][r]+=1;else{if(17==i||17==r){if(17==i&&17==r)continue;17==i?i=15:r=15}if(i<4){if(f[r]>0)for(let e=0;e<4;e++)l[r][e]&&(n[i][e]+=f[r])}else if(r<4){if(f[i]>0)for(let e=0;e<4;e++)l[i][e]&&(n[e][r]+=f[i])}else{let e=f[i]*f[r];if(e>0)for(let t=0;t<4;t++)if(l[i][t])for(let f=0;f<4;f++)l[r][f]&&(n[t][f]+=e)}}}else if("RESOLVE"==o)for(let o=0;o<i;o++){let i=e[o],r=t[o];if(i<4&&r<4)n[i][r]+=1;else{if(17==i||17==r)continue;if(i<4){if(f[r]>0){if(l[r][i]){n[i][i]+=1;continue}for(let e=0;e<4;e++)l[r][e]&&(n[i][e]+=f[r])}}else if(r<4){if(f[i]>0){if(l[i][r]){n[r][r]+=1;continue}for(let e=0;e<4;e++)l[i][e]&&(n[e][r]+=f[i])}}else{let e=f[i]*f[r];if(e>0){let t=0,f=[!1,!1,!1,!1];for(let e=0;e<4;e++)l[i][e]&&l[r][e]&&(t++,f[e]=!0);if(t>0){let e=1/t;for(let t=0;t<4;t++)f[t]&&(n[t][t]+=e);continue}for(let t=0;t<4;t++)if(l[i][t])for(let f=0;f<4;f++)l[r][f]&&(n[t][f]+=e)}}}}else for(let o=0;o<i;o++){let i=e[o],r=t[o];if(i<4&&r<4)n[i][r]+=1;else{if(17==i||17==r)continue;if(i<4){if(f[r]>0)for(let e=0;e<4;e++)l[r][e]&&(n[i][e]+=f[r])}else if(r<4){if(f[i]>0)for(let e=0;e<4;e++)l[i][e]&&(n[e][r]+=f[i])}else{let e=f[i]*f[r];if(e>0)for(let t=0;t<4;t++)if(l[i][t])for(let f=0;f<4;f++)l[r][f]&&(n[t][f]+=e)}}}let s=[0,0,0,0];for(let e=0;e<4;e++)for(let t=0;t<4;t++)s[e]+=n[e][t],s[t]+=n[e][t];let c=2/(s[0]+s[1]+s[2]+s[3]),u=(n[0][2]+n[2][0])*c,h=(n[1][3]+n[3][1])*c,a=1-((n[0][0]+n[1][1]+n[2][2]+n[3][3])*c+u+h);if(0==s[0]||0==s[1]||0==s[2]||0==s[3])u=1-2*(u+h)-a,h=1-2*a,r=u>0&&h>0?-.5*Math.log(u)-.25*Math.log(h):1;else{const e=1/(s[0]+s[1]+s[2]+s[3]);let t=[0,0,0,0];for(let l=0;l<4;l++)t[l]=s[l]*e;const l=t[0]+t[2],f=t[1]+t[3],o=2*t[0]*t[2]/l,i=2*t[1]*t[3]/f,n=2*(l*f-t[0]*t[2]*f/l-t[1]*t[3]*l/f);u=1-u/o-.5*a/l,h=1-h/i-.5*a/f,a=1-.5*a/f/l,r=-o*Math.log(u)-i*Math.log(h)-n*Math.log(a)}return r},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.tn93=e):self.tn93=e}();
